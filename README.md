# Telegram Video Downloader Bot

Telegram-бот для скачивания видео с помощью yt-dlp.

## Возможности

- Скачивание видео с YouTube и других поддерживаемых платформ
- Автоматическая отправка скачанного видео обратно в чат
- Автоочистка файлов старше 2 дней
- Хранение настроек в переменных окружения
- Поддержка сайтов с Cloudflare защитой (RedGifs и др.)

## Быстрый запуск (Docker Compose)

1. Клонируйте репозиторий и перейдите в директорию проекта
2. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```
3. Добавьте ваш токен в `.env`:
```env
TELEGRAM_TOKEN=ваш_токен_бота
FILE_RETENTION_DAYS=2
```
4. Запустите бота:
```bash
docker-compose up -d
```

## Запуск без Docker

1. Клонируйте репозиторий и перейдите в директорию проекта:
```bash
cd UniDownloaderBot
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Установите переменную окружения:
```bash
export TELEGRAM_TOKEN="ваш_токен_бота"
export FILE_RETENTION_DAYS=2
```

4. Запустите бота:
```bash
python main.py
```

## Использование

1. Запустите бота командой `/start`
2. Отправьте ссылку на видео
3. Бот скачает видео и отправит его обратно в чат

## RedGifs и Cloudflare

Для скачивания с RedGifs и других сайтов с Cloudflare защитой может потребоваться файл cookies:

1. Установите расширение браузера **"Get cookies.txt"** (Chrome/Firefox)
2. Зайдите на https://www.redgifs.com
3. Нажмите на расширение → "Export" → сохраните как `cookies.txt`
4. Поместите файл `cookies.txt` в директорию проекта (рядом с docker-compose.yml)
5. Перезапустите бота: `docker-compose restart`

## Переменные окружения

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `TELEGRAM_TOKEN` | Токен Telegram-бота от @BotFather | (обязательно) |
| `TEMP_DIR` | Директория для хранения файлов | `/tmp/video_downloads` |
| `FILE_RETENTION_DAYS` | Время хранения файлов (дней) | `2` |
| `COOKIES_FILE` | Путь к файлу cookies | `/app/cookies.txt` |

## Ограничения

- Максимальный размер файла для отправки в Telegram: 50 МБ
- Время скачивания зависит от размера видео и скорости интернета
- Файлы автоматически удаляются через указанное количество дней
- RedGifs и некоторые сайты требуют cookies для обхода Cloudflare
